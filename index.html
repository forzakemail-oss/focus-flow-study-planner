<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Flowbot Live AI</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#ffffff; --surface:#ffffff; --muted:#f4f6fb; --text:#0b1b3a; --sub:#51607a; --border:rgba(11,27,58,0.10);
  --brand:#1E90FF; --brand2:#0A2351; --soft:rgba(30,144,255,0.14);
  --shadow:0 14px 35px rgba(10,35,81,0.12); --shadow2:0 10px 25px rgba(10,35,81,0.08);
  --r:18px; --r2:12px; --navh:64px; --max:1120px;
  --focus:0 0 0 3px rgba(30,144,255,0.35); --danger:#d64545; --ok:#1f9d55; --warn:#d78b00;
}
body[data-theme="dark"]{
  --bg:#0b0f18; --surface:#0f1626; --muted:#0c1322; --text:#f4f7ff; --sub:#b7c3dd; --border:rgba(244,247,255,0.10);
  --soft:rgba(30,144,255,0.18); --shadow:0 18px 50px rgba(0,0,0,0.45); --shadow2:0 12px 30px rgba(0,0,0,0.30);
}
*{box-sizing:border-box;}
html{scroll-behavior:smooth;}
body{margin:0;font-family:'Poppins',sans-serif;background:var(--bg);color:var(--text);overflow-x:hidden;}
a{color:inherit;text-decoration:none;}
button,input,select,textarea{font-family:inherit;}
:focus-visible{outline:none;box-shadow:var(--focus);border-radius:10px;}

/* Top Bar */
.topbar{position:fixed; inset:0 0 auto 0;height:var(--navh);z-index:1000;background:linear-gradient(90deg,var(--brand2),var(--brand));color:#fff;border-bottom:1px solid rgba(255,255,255,0.12);backdrop-filter:blur(10px);}
.topbar-inner{max-width:var(--max);margin:0 auto;height:100%;padding:0 16px;display:flex;align-items:center;justify-content:space-between;gap:12px;}
.brandname{font-weight:800;letter-spacing:0.2px;white-space:nowrap;}

/* Main */
main{max-width:var(--max);margin:0 auto;padding:var(--navh) 16px 98px}
.card{background:var(--surface);border:1px solid var(--border);border-radius:var(--r);box-shadow:var(--shadow2);padding:18px;min-width:0;margin-top:16px;}
.card h2{margin:0 0 10px;font-size:18px;letter-spacing:-0.2px}
.input,textarea{width:100%;padding:10px 12px;border-radius:14px;border:1px solid var(--border);background:var(--muted);color:var(--text);transition:0.2s;}
.input:focus,textarea:focus{outline:none;box-shadow:var(--focus);border-color:var(--brand);}
.btn{border:none; cursor:pointer;padding:10px 14px;border-radius:999px;font-weight:700;display:inline-flex;align-items:center;gap:8px;transition:0.2s;white-space:nowrap;}
.btn-primary{background:var(--brand2);color:#fff}
.btn-primary:hover{background:var(--brand);transform:translateY(-1px)}
.response-box{border:1px solid var(--border);border-radius:14px;background:var(--muted);padding:12px;min-height:80px;max-height:400px;overflow-y:auto;margin-top:10px;}
.message{margin-bottom:10px;}
.message.user{font-weight:600;text-align:right;}
.message.flowbot{font-weight:500;color:var(--brand);white-space:pre-wrap;}
.loading-dot{display:inline-block;width:8px;height:8px;background:var(--brand);border-radius:50%;margin:0 2px;animation:blink 1.2s infinite;}
@keyframes blink{0%,80%,100%{opacity:0}40%{opacity:1}}
</style>
</head>
<body>
<div class="topbar">
  <div class="topbar-inner">
    <div class="brandname">Flowbot</div>
  </div>
</div>

<main>
  <div class="card">
    <h2>Ask Flowbot</h2>
    <textarea id="userInput" class="input" rows="2" placeholder="Type your question..."></textarea>
    <button id="sendBtn" class="btn btn-primary">Ask Flowbot</button>
    <div id="responseBox" class="response-box"></div>
  </div>
</main>

<script>
const userInput = document.getElementById('userInput');
const sendBtn = document.getElementById('sendBtn');
const responseBox = document.getElementById('responseBox');

function appendMessage(text, sender){
  const div = document.createElement('div');
  div.className = 'message ' + sender;
  div.textContent = text;
  responseBox.appendChild(div);
  responseBox.scrollTop = responseBox.scrollHeight;
  return div;
}

// Streaming effect for Flowbot
function typeStream(element, text){
  element.textContent = '';
  let i = 0;
  const interval = setInterval(()=>{
    element.textContent += text.charAt(i);
    i++;
    responseBox.scrollTop = responseBox.scrollHeight;
    if(i>=text.length) clearInterval(interval);
  }, 20); // 20ms per character
}

// Function to call OpenAI API with streaming
async function getFlowbotResponse(question){
  const API_KEY = 'YOUR_OPENAI_API_KEY'; // ðŸ”‘ Replace with your OpenAI API key

  try {
    const resp = await fetch('https://api.openai.com/v1/chat/completions', {
      method:'POST',
      headers:{
        'Content-Type':'application/json',
        'Authorization':'Bearer ' + API_KEY
      },
      body: JSON.stringify({
        model: "gpt-3.5-turbo",
        messages: [{ role: "user", content: question }],
        temperature: 0.7,
        max_tokens: 500
      })
    });
    const data = await resp.json();
    return data.choices[0].message.content.trim();
  } catch(e){
    console.error(e);
    return "Flowbot encountered an error. Make sure your API key is correct.";
  }
}

sendBtn.addEventListener('click', async () => {
  const question = userInput.value.trim();
  if(!question) return;
  appendMessage(question, 'user');
  userInput.value = '';

  const flowDiv = appendMessage('', 'flowbot');

  // Add temporary loading dots
  flowDiv.innerHTML = '<span class="loading-dot"></span><span class="loading-dot"></span><span class="loading-dot"></span>';
  
  const flowResp = await getFlowbotResponse(question);
  typeStream(flowDiv, flowResp);
});

userInput.addEventListener('keydown', e => {
  if(e.key === 'Enter' && !e.shiftKey){
    e.preventDefault();
    sendBtn.click();
  }
});
</script>
</body>
</html>
